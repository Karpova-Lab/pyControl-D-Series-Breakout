{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Overview # What is this? # pyControl D-series breakout is a device that connects a pyboard D-series microcontroller with twelve RJ45 ports. It is intended for use with the pyControl behavioral experiment control framework. How is it different? # pyControl Breakout Board 1.2 (left) and D-series Breakout (right) The core distinction between this breakout board and the official pyControl breakout board 1.2 is the upgrade to a newer generation pyboard (i.e. a more powerful microcontroller). Some benefits of the newer pyboard include being smaller, faster, having more memory, and having more input/output pins. Having more available pins is particularly useful, as it enables the breakout board to provide more behavior ports without requiring a port expander . Below is a comparison of the two breakout boards. Breakout Board 1.2 D-series Breakout Board 1.6 Microcontroller Board pyboard v1.1 pyboard D-series SF6W CPU 168 MHz Cortex-M4F 216 MHz Cortex-M7F RAM 192 KB 512 KB ROM 512 KB 4,048 KB Connectors RJ45 6 12 BNC 4 0 USB Full Speed (12 Mbit/s) High Speed (480 Mbit/s) Behavior Ports Power Driver Pins 14 24 Digital I/O Pins 14 30 ADC Pins 12 15 DAC Pins 2 2 UART Buses 3 4 I2C Buses 2 2 Dimensions PCB 1.8 in x 7.6 in 2.7 in x 3.6 in Performance 1 Latency - No load 561 \u00b1 16 \u00b5s (100% < 1 ms) 307 \u00b1 9 \u00b5s (100% < 1 ms) Latency - High load 842 \u00b1 293 \u00b5s (84.8% < 1 ms) 372 \u00b1 95 \u00b5s (100% < 1 ms) Accuracy - No load -210 \u00b1 281 \u00b5s (100% < 1 ms) -342 \u00b1 285 \u00b5s (100% < 1 ms) Accuracy - High load -27 \u00b1 351 \u00b5s (99.2% < 1 ms) -361 \u00b1 280 \u00b5s (100% < 1 ms) More details about the performance comparison here . \u21a9","title":"Overview"},{"location":"#overview","text":"","title":"Overview"},{"location":"#what-is-this","text":"pyControl D-series breakout is a device that connects a pyboard D-series microcontroller with twelve RJ45 ports. It is intended for use with the pyControl behavioral experiment control framework.","title":"What is this?"},{"location":"#how-is-it-different","text":"pyControl Breakout Board 1.2 (left) and D-series Breakout (right) The core distinction between this breakout board and the official pyControl breakout board 1.2 is the upgrade to a newer generation pyboard (i.e. a more powerful microcontroller). Some benefits of the newer pyboard include being smaller, faster, having more memory, and having more input/output pins. Having more available pins is particularly useful, as it enables the breakout board to provide more behavior ports without requiring a port expander . Below is a comparison of the two breakout boards. Breakout Board 1.2 D-series Breakout Board 1.6 Microcontroller Board pyboard v1.1 pyboard D-series SF6W CPU 168 MHz Cortex-M4F 216 MHz Cortex-M7F RAM 192 KB 512 KB ROM 512 KB 4,048 KB Connectors RJ45 6 12 BNC 4 0 USB Full Speed (12 Mbit/s) High Speed (480 Mbit/s) Behavior Ports Power Driver Pins 14 24 Digital I/O Pins 14 30 ADC Pins 12 15 DAC Pins 2 2 UART Buses 3 4 I2C Buses 2 2 Dimensions PCB 1.8 in x 7.6 in 2.7 in x 3.6 in Performance 1 Latency - No load 561 \u00b1 16 \u00b5s (100% < 1 ms) 307 \u00b1 9 \u00b5s (100% < 1 ms) Latency - High load 842 \u00b1 293 \u00b5s (84.8% < 1 ms) 372 \u00b1 95 \u00b5s (100% < 1 ms) Accuracy - No load -210 \u00b1 281 \u00b5s (100% < 1 ms) -342 \u00b1 285 \u00b5s (100% < 1 ms) Accuracy - High load -27 \u00b1 351 \u00b5s (99.2% < 1 ms) -361 \u00b1 280 \u00b5s (100% < 1 ms) More details about the performance comparison here . \u21a9","title":"How is it different?"},{"location":"building/","text":"Building # Printed Circuit Board # layout schematic dseries_breakout_gerber.zip Bill of Materials # View interactive BOM Qty Reference Description Value/MPN 2 C1, C2 1206 Capacitor 10\u00b5F 1 D1 Schottky Diode MBR120VLSFT3G 1 J1 Micro USB Socket 10118194-0001LF 1 J2 12-port RJ45 Connector 5569263-1 1 J3 Barrel Jack Connector PJ-037A 1 S1 Large Tactile Switch TL3300DF160Q 1 S2 Small Tactile Switch B3FS-1010P 1 U2 5V DC to DC Converter R-78E5.0-1.0 3 U3, U4, U5 8-channel Driver Array TBD62083A 2 X1U1, X2U1 40-pin Connector DF40HC(4.0)-40DS-0.4V(70)","title":"Building"},{"location":"building/#building","text":"","title":"Building"},{"location":"building/#printed-circuit-board","text":"layout schematic dseries_breakout_gerber.zip","title":"Printed Circuit Board"},{"location":"building/#bill-of-materials","text":"View interactive BOM Qty Reference Description Value/MPN 2 C1, C2 1206 Capacitor 10\u00b5F 1 D1 Schottky Diode MBR120VLSFT3G 1 J1 Micro USB Socket 10118194-0001LF 1 J2 12-port RJ45 Connector 5569263-1 1 J3 Barrel Jack Connector PJ-037A 1 S1 Large Tactile Switch TL3300DF160Q 1 S2 Small Tactile Switch B3FS-1010P 1 U2 5V DC to DC Converter R-78E5.0-1.0 3 U3, U4, U5 8-channel Driver Array TBD62083A 2 X1U1, X2U1 40-pin Connector DF40HC(4.0)-40DS-0.4V(70)","title":"Bill of Materials"},{"location":"further/","text":"Further Resources # pyControl # Official pyControl documentation pyControl Google groups forum pyControl on GitHub Purchase ready to use pyControl hardware at the Open Ephys Store or Labmaker MicroPython and Pyboard D-series # MicroPython Documentation MicroPython Store Pyboard D-series Documentation Karpova Lab # Lab website D-series breakout repository More open hardware repositories Cerebro Lever Syringe Pump Nosepoke","title":"Further Resources"},{"location":"further/#further-resources","text":"","title":"Further Resources"},{"location":"further/#pycontrol","text":"Official pyControl documentation pyControl Google groups forum pyControl on GitHub Purchase ready to use pyControl hardware at the Open Ephys Store or Labmaker","title":"pyControl"},{"location":"further/#micropython-and-pyboard-d-series","text":"MicroPython Documentation MicroPython Store Pyboard D-series Documentation","title":"MicroPython and Pyboard D-series"},{"location":"further/#karpova-lab","text":"Lab website D-series breakout repository More open hardware repositories Cerebro Lever Syringe Pump Nosepoke","title":"Karpova Lab"},{"location":"using/","text":"Using # What To Get # Qty Description Order Link Required 1 D-series Breakout Board Build your own Yes 1 pyboard D-series Microcontroller Micropython Yes 1 12V DC Power Supply Digi-Key Yes 1 USB cable Digi-Key Yes 1 DIN Rail Digi-Key 2 DIN Rail Adapter Digi-Key 4 M3 screws Digi-Key First Time Setup # Warning The breakout board is designed to use the microcontroller's high speed USB interface. We must make a change to boot.py so that everything works properly https://pybd.io/hw/pybd_sfxw.html#usb-ports . Plug the bare pyboard D-series into your computer. It should appear as a flash drive on your computer. Edit the boot.py file to have the following: import pyb pyb . usb_mode ( 'VCP' , port = 1 ) This change to boot.py is required, otherwise the pyboard won't be found by the pyControl software when it is connected through the breakout board! You are now ready to connect to the D-series Breakout board. Plug the pyboard onto the breakout board Plug 12V DC power into the breakout board Connect the breakout board to your computer with the USB Connecting Peripheral Devices # Refer to the table below when considering where to plug in devices. Fill up the top row first with standard devices that just need inputs or outputs. Use the second row for devices that require special communication (UART or I 2 C). Note on interrupts The pyboard microcontroller is limited to 16 separate interrupt vectors . All of the DIO pins on the top row of the breakout board (Ports 1-6) are on separate interrupt vectors, so if you have a lot of input devices, plug them into the top row where there is a guarantee of no interrupt vector collisions. Note on SPI If you need to connect to a peripheral using SPI, take a look at Micropython's machine.SoftSPI The hardware SPI pins are unfortunately not grouped together on a single RJ45 jack on this breakout board, but instead are split up among multiple ports. If you absolutely need to access the hardware SPI pins, you can plug in multiple port adapters to expose the pins. The following table desribes hardware SPI pin mapping. SPI function CPU name Pin name other pin name D-series breakout port port function SPI(1) SS A4 x5 W7 7 C SCK A5 x6 W6 8 C MISO A6 x7 W10 4 A MOSI A7 x8 W14 9 B SPI(2) SS B12 y5 W45 3 A SCK B13 y6 W49 2 C MISO C2 y7 W53 1 A MOSI C3 y8 W57 1 B https://store.micropython.org/media/products/PYBD_SF2_W4F2_ds2.jpg https://store.micropython.org/media/products/WBUS_DIP68_ds1.jpg Example Task # The following instructions will enable you to run the hardware_test.py task file that comes with pyControl. The task uses 3 nosepokes plugged into ports 1-3 and a houselight plugged into port 4. Download the latest version of pyControl Download breakout_dseries_1_6.py and place it in the devices\\ directory Download new_hardware_definition.py and place it in the config\\ directory . \u2514\u2500 pyControl \u251c config \u2502 \u2514\u2500 new_hardware_definition.py \u2514\u2500 devices \u2514\u2500 breakout_dseries_1_6.py Launch pyControl and press the \"Connect\" button to connect to the breakout board. Press the \"Config\" button and the \"Load framework\" button. Again, press the \"Config\" button. Press the \"Load hardware definition\" button and then select \"new_hardware_definition.py\" to upload. If successful, you should get a couple OK's confirming that the framework and hardware definition have been transferred. From the task dropdown, select \"examples/hardware_test\", then click \"Upload\". Click \"Start\". The houselight should turn on and nosepokes will now respond to pokes.","title":"Using"},{"location":"using/#using","text":"","title":"Using"},{"location":"using/#what-to-get","text":"Qty Description Order Link Required 1 D-series Breakout Board Build your own Yes 1 pyboard D-series Microcontroller Micropython Yes 1 12V DC Power Supply Digi-Key Yes 1 USB cable Digi-Key Yes 1 DIN Rail Digi-Key 2 DIN Rail Adapter Digi-Key 4 M3 screws Digi-Key","title":"What To Get"},{"location":"using/#first-time-setup","text":"Warning The breakout board is designed to use the microcontroller's high speed USB interface. We must make a change to boot.py so that everything works properly https://pybd.io/hw/pybd_sfxw.html#usb-ports . Plug the bare pyboard D-series into your computer. It should appear as a flash drive on your computer. Edit the boot.py file to have the following: import pyb pyb . usb_mode ( 'VCP' , port = 1 ) This change to boot.py is required, otherwise the pyboard won't be found by the pyControl software when it is connected through the breakout board! You are now ready to connect to the D-series Breakout board. Plug the pyboard onto the breakout board Plug 12V DC power into the breakout board Connect the breakout board to your computer with the USB","title":"First Time Setup"},{"location":"using/#connecting-peripheral-devices","text":"Refer to the table below when considering where to plug in devices. Fill up the top row first with standard devices that just need inputs or outputs. Use the second row for devices that require special communication (UART or I 2 C). Note on interrupts The pyboard microcontroller is limited to 16 separate interrupt vectors . All of the DIO pins on the top row of the breakout board (Ports 1-6) are on separate interrupt vectors, so if you have a lot of input devices, plug them into the top row where there is a guarantee of no interrupt vector collisions. Note on SPI If you need to connect to a peripheral using SPI, take a look at Micropython's machine.SoftSPI The hardware SPI pins are unfortunately not grouped together on a single RJ45 jack on this breakout board, but instead are split up among multiple ports. If you absolutely need to access the hardware SPI pins, you can plug in multiple port adapters to expose the pins. The following table desribes hardware SPI pin mapping. SPI function CPU name Pin name other pin name D-series breakout port port function SPI(1) SS A4 x5 W7 7 C SCK A5 x6 W6 8 C MISO A6 x7 W10 4 A MOSI A7 x8 W14 9 B SPI(2) SS B12 y5 W45 3 A SCK B13 y6 W49 2 C MISO C2 y7 W53 1 A MOSI C3 y8 W57 1 B https://store.micropython.org/media/products/PYBD_SF2_W4F2_ds2.jpg https://store.micropython.org/media/products/WBUS_DIP68_ds1.jpg","title":"Connecting Peripheral Devices"},{"location":"using/#example-task","text":"The following instructions will enable you to run the hardware_test.py task file that comes with pyControl. The task uses 3 nosepokes plugged into ports 1-3 and a houselight plugged into port 4. Download the latest version of pyControl Download breakout_dseries_1_6.py and place it in the devices\\ directory Download new_hardware_definition.py and place it in the config\\ directory . \u2514\u2500 pyControl \u251c config \u2502 \u2514\u2500 new_hardware_definition.py \u2514\u2500 devices \u2514\u2500 breakout_dseries_1_6.py Launch pyControl and press the \"Connect\" button to connect to the breakout board. Press the \"Config\" button and the \"Load framework\" button. Again, press the \"Config\" button. Press the \"Load hardware definition\" button and then select \"new_hardware_definition.py\" to upload. If successful, you should get a couple OK's confirming that the framework and hardware definition have been transferred. From the task dropdown, select \"examples/hardware_test\", then click \"Upload\". Click \"Start\". The houselight should turn on and nosepokes will now respond to pokes.","title":"Example Task"}]}