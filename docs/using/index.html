<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.83.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Using #  What To Get #     Qty Description Order Link Required     1 D-series Breakout Board Build your own Yes   1 pyboard D-series Microcontroller Micropython Yes   1 12V DC Power Supply Digi-Key Yes   1 USB cable Digi-Key Yes   1 DIN Rail Digi-Key    2 DIN Rail Adapter Digi-Key    4 M3 screws Digi-Key     First Time Setup #   Attention The breakout board is designed to use the microcontroller&rsquo;s high speed USB interface.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Using #  What To Get #     Qty Description Order Link Required     1 D-series Breakout Board Build your own Yes   1 pyboard D-series Microcontroller Micropython Yes   1 12V DC Power Supply Digi-Key Yes   1 USB cable Digi-Key Yes   1 DIN Rail Digi-Key    2 DIN Rail Adapter Digi-Key    4 M3 screws Digi-Key     First Time Setup #   Attention The breakout board is designed to use the microcontroller&rsquo;s high speed USB interface." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://karpova-lab.github.io/pyControl-D-Series-Breakout/using/" /><meta property="article:section" content="" />



<title>Using | D-series Breakout for pyControl</title>
<link rel="manifest" href="/pyControl-D-Series-Breakout/manifest.json">
<link rel="icon" href="/pyControl-D-Series-Breakout/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/pyControl-D-Series-Breakout/book.min.f595ea1b61558d959b1b9c742c20a3623db749f04ea376d3e136eff1128da86c.css" integrity="sha256-9ZXqG2FVjZWbG5x0LCCjYj23SfBOo3bT4Tbv8RKNqGw="><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <script src="https://kit.fontawesome.com/622646117d.js" crossorigin="anonymous"></script>
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/pyControl-D-Series-Breakout"><span>D-series Breakout for pyControl</span>
  </a>
</h2>




<div style="border-top: 1px solid #d3d3d3; padding-top:10px; width: 75%;"></div>







  <ul>
<li><a href="/pyControl-D-Series-Breakout/">Overview</a></li>
<li><a href="/pyControl-D-Series-Breakout/building/">Building</a></li>
<li><a href="/pyControl-D-Series-Breakout/using/"class=active>Using</a></li>
<li><a href="/pyControl-D-Series-Breakout/further/">Further Resources</a>
<br /></li>
</ul>









<div style="border-top: 1px solid #d3d3d3; padding-top:20px; width: 75%;">
</div>
<a href="https://github.com/Karpova-Lab/pyControl-D-series-Breakout" class="btn-external issue">
    <i class="fab fa-github"></i>
      GitHub Repository
</a>
<br>

<p class="github_text">Questions? Feedback? Ideas?</p>
<a href="https://github.com/Karpova-Lab/pyControl-D-series-Breakout/discussions" class="btn-external issue">
    <i class="fas fa-comments"></i>   Add to discussions
</a>

<p class="github_text">Corrections?</p>
<a href="https://github.com/Karpova-Lab/pyControl-D-series-Breakout/issues/new" class="btn-external issue">
    <i class="fas fa-edit"></i> Submit an issue 
</a>
</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/pyControl-D-Series-Breakout/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Using</strong>

  <label for="toc-control">
    
    <img src="/pyControl-D-Series-Breakout/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using">Using</a>
      <ul>
        <li><a href="#what-to-get">What To Get</a></li>
        <li><a href="#first-time-setup">First Time Setup</a></li>
        <li><a href="#connecting-peripheral-devices">Connecting Peripheral Devices</a></li>
        <li><a href="#example-task">Example Task</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="using">
  Using
  <a class="anchor" href="#using">#</a>
</h1>
<h2 id="what-to-get">
  What To Get
  <a class="anchor" href="#what-to-get">#</a>
</h2>
<table>
<thead>
<tr>
<th>Qty</th>
<th>Description</th>
<th>Order Link</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>D-series Breakout Board</td>
<td><a href="https://karpova-lab.github.io/pyControl-D-Series-Breakout/building/">Build your own</a></td>
<td>Yes</td>
</tr>
<tr>
<td>1</td>
<td>pyboard D-series Microcontroller</td>
<td><a href="https://store.micropython.org/product/PYBD-SF6-W4F2">Micropython</a></td>
<td>Yes</td>
</tr>
<tr>
<td>1</td>
<td>12V DC Power Supply</td>
<td><a href="https://www.digikey.com/products/en?keywords=102-3631-ND">Digi-Key</a></td>
<td>Yes</td>
</tr>
<tr>
<td>1</td>
<td>USB cable</td>
<td><a href="https://www.digikey.com/products/en?keywords=380-1431-ND">Digi-Key</a></td>
<td>Yes</td>
</tr>
<tr>
<td>1</td>
<td>DIN Rail</td>
<td><a href="https://www.digikey.com/short/prn3bb">Digi-Key</a></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>DIN Rail Adapter</td>
<td><a href="https://www.digikey.com/products/en?keywords=277-2296-nd">Digi-Key</a></td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>M3 screws</td>
<td><a href="https://www.digikey.com/products/en?keywords=335-1156-ND">Digi-Key</a></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="first-time-setup">
  First Time Setup
  <a class="anchor" href="#first-time-setup">#</a>
</h2>
<blockquote class="book-hint warning">
  <h3 id="i-classfas-fa-exclamation-trianglei-attention"><i class="fas fa-exclamation-triangle"></i> <strong>Attention</strong></h3>
<p>The breakout board is designed to use the microcontroller&rsquo;s high speed USB interface. We must make a change to <code>boot.py</code> so that everything works properly <a href="https://pybd.io/hw/pybd_sfxw.html#usb-ports">https://pybd.io/hw/pybd_sfxw.html#usb-ports</a>.</p>
<ol>
<li>Plug the bare pyBoard D-series into your computer.</li>
</ol>
<p><img src="board_setup.jpg" alt=""></p>
<ol start="2">
<li>It should appear as a flash drive on your computer. Edit the <code>boot.py</code> file to have the following:</li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">pyb</span>
pyb<span style="color:#666">.</span>usb_mode(<span style="color:#4070a0">&#39;VCP&#39;</span>,port<span style="color:#666">=</span><span style="color:#40a070">1</span>)
</code></pre></div><p>This change to <code>boot.py</code> is required, otherwise the pyboard won&rsquo;t be found by the pyControl software when it is connected through the breakout board!</p>

</blockquote>

<p>You are now ready to connect to the D-series Breakout board.</p>
<ol>
<li>Plug the pyBoard onto the breakout board</li>
<li>Plug 12V DC power into the breakout board</li>
<li>Connect the breakout board to your computer with the USB</li>
</ol>
<p><img src="plugged_in.jpg" alt="" /></p>
<h2 id="connecting-peripheral-devices">
  Connecting Peripheral Devices
  <a class="anchor" href="#connecting-peripheral-devices">#</a>
</h2>
<p>Refer to the table below when considering where to plug in devices. Fill up the top row first with standard devices that just need inputs or outputs. Use the second row for devices that require special communication (UART or I<sup>2</sup>C).</p>
<blockquote class="book-hint info">
  <h3 id="i-classfas-fa-info-circlei-note"><i class="fas fa-info-circle"></i> Note</h3>
<p>The pyBoard microcontroller is limited to 16 seperate interrupt vectors (<a href="https://forum.micropython.org/viewtopic.php?t=2271)">https://forum.micropython.org/viewtopic.php?t=2271)</a>.
All of the DIO pins on the top row of the breakout board (Ports 1-6) are on separate interrupt vectors, so if you have a lot of input devices, plug them into the top row where there is a guarantee of no interrupt vector collisions.
</blockquote>

<blockquote class="book-hint info">
  <h3 id="i-classfas-fa-info-circlei-note"><i class="fas fa-info-circle"></i> Note</h3>
<p>If you need to connect to a peripheral using SPI, take a look at Micropython&rsquo;s <a href="https://docs.micropython.org/en/latest/library/machine.SPI.html">machine.SoftSPI</a></p>
<p>The hardware SPI pins are unfortunately not grouped together on a single RJ45 jack on this breakout board, but instead are split up among multiple ports.
If you absolutely need to access the hardware SPI pins, you can plug in multiple <a href="https://open-ephys.org/pycontrol/pycontrol-peripherals">port adapters</a> to expose the pins.
Information on which hardware SPI pins are where can be found in <a href="spi_ports.xlsx" download > <i class="fa fa-download"></i>this spreadsheet </a></p>

</blockquote>

<a href="pinouts.jpg">
  <img src="pinouts.jpg" >
  </img>
</a>
<br>


<p style="text-align:center; margin-top:-20px; font-style:italic;">Mapping of pins to ports (click to enlarge)</p>
<p><img src="board_front_labeled.jpg" alt="" /></p>
<h2 id="example-task">
  Example Task
  <a class="anchor" href="#example-task">#</a>
</h2>
<p>The following instructions will enable you to run the <code>hardware_test.py</code> task file that comes with pyControl. The task uses 3 nosepokes plugged into ports 1-3 and a houselight plugged into port 4.</p>
<ol>
<li>Download the latest version of <a href="https://github.com/pyControl/code/releases">pyControl</a></li>
<li>Download 


<a href="breakout_dseries_1_6.py" download >
    <i class="fa fa-download"></i> breakout_dseries_1_6.py
</a> and place it in the <code>devices\</code> directory</li>
<li>Download 


<a href="new_hardware_definition.py" download >
    <i class="fa fa-download"></i> new_hardware_definition.py
</a> and place it in the <code>config\</code> directory</li>
</ol>
<pre><code>.
└─ pyControl
   ├ config
   │  └─ new_hardware_definition.py
   └─ devices
      └─ breakout_dseries_1_6.py
</code></pre><!-- .. #pyControl
.. ##config
.. ###new_hardware_definition_1_6.py
.. ##devices
.. ###_breakout_dseries.py -->
<ol start="4">
<li>Launch pyControl and press the &ldquo;Connect&rdquo; button to connect to the breakout board.</li>
<li>Press the &ldquo;Config&rdquo; button and the &ldquo;Load framework&rdquo; button.</li>
<li>Again, press the &ldquo;Config&rdquo; button. Press the &ldquo;Load hardware definition&rdquo; button and then select &ldquo;new_hardware_definition.py&rdquo; to upload.</li>
<li>If succesfull, you should get a couple OK&rsquo;s</li>
</ol>
<p><img src="upload.png" alt="" /></p>
<ol start="8">
<li>From the task dropdown, select &ldquo;examples/hardware_test&rdquo;, then click &ldquo;Upload&rdquo;.</li>
<li>Click &ldquo;Start&rdquo;. The houselight should turn on and nosepokes will now respond to pokes.</li>
</ol>
<p><img src="task_running.png" alt="" /></p>
<p>


<a class="btn-nav prev" href= https://karpova-lab.github.io/pyControl-D-Series-Breakout/building/>
    <i style="font-size: 1rem;">previous</i><br><i class="fas fa-arrow-left"></i> Building</i>
</a>




<a class="btn-nav next" href= https://karpova-lab.github.io/pyControl-D-Series-Breakout/further/ >
    <i style="font-size: 1rem;">next</i><br>Further Resources <i class="fas fa-arrow-right"></i></i>
</a>
<br></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using">Using</a>
      <ul>
        <li><a href="#what-to-get">What To Get</a></li>
        <li><a href="#first-time-setup">First Time Setup</a></li>
        <li><a href="#connecting-peripheral-devices">Connecting Peripheral Devices</a></li>
        <li><a href="#example-task">Example Task</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












